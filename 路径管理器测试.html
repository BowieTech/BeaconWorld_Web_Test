<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ”§ è·¯å¾„ç®¡ç†å™¨æµ‹è¯• - Beacon World App</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .content {
            padding: 30px;
        }

        .info-section {
            background: #f8f9ff;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            border-left: 5px solid #4facfe;
        }

        .test-section {
            margin-bottom: 40px;
        }

        .test-section h3 {
            color: #333;
            font-size: 1.5em;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .path-test {
            background: #fff;
            border: 2px solid #e1e8ed;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
            transition: all 0.3s ease;
        }

        .path-test:hover {
            border-color: #4facfe;
            box-shadow: 0 5px 15px rgba(79, 172, 254, 0.1);
        }

        .path-input {
            font-family: 'Courier New', monospace;
            color: #666;
            font-size: 0.9em;
            margin-bottom: 8px;
        }

        .path-output {
            font-family: 'Courier New', monospace;
            color: #2d5aa0;
            font-weight: bold;
            font-size: 1em;
            background: #f0f7ff;
            padding: 8px 12px;
            border-radius: 5px;
            border-left: 3px solid #4facfe;
        }

        .status {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8em;
            font-weight: bold;
            margin-left: 10px;
        }

        .status.success {
            background: #d4edda;
            color: #155724;
        }

        .status.info {
            background: #cce7ff;
            color: #004085;
        }

        .environment-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .env-card {
            background: white;
            padding: 15px;
            border-radius: 10px;
            border: 2px solid #e1e8ed;
            text-align: center;
        }

        .env-card h4 {
            color: #333;
            margin-bottom: 8px;
        }

        .env-value {
            font-family: 'Courier New', monospace;
            font-weight: bold;
            color: #4facfe;
        }

        .explanation {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
        }

        .explanation h4 {
            color: #856404;
            margin-bottom: 10px;
        }

        .explanation p {
            color: #856404;
            line-height: 1.6;
        }

        .button {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            font-size: 1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 10px 5px;
        }

        .button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(79, 172, 254, 0.3);
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ”§ è·¯å¾„ç®¡ç†å™¨æµ‹è¯•</h1>
            <p>éªŒè¯è‡ªåŠ¨è·¯å¾„è½¬æ¢åŠŸèƒ½ - æœ¬åœ°å¼€å‘ vs Webå‘å¸ƒ</p>
        </div>

        <div class="content">
            <div class="info-section">
                <h3>ğŸ“‹ å½“å‰ç¯å¢ƒä¿¡æ¯</h3>
                <div class="environment-info">
                    <div class="env-card">
                        <h4>ğŸŒ å¹³å°</h4>
                        <div class="env-value" id="platform">Web</div>
                    </div>
                    <div class="env-card">
                        <h4>ğŸš€ æ¨¡å¼</h4>
                        <div class="env-value" id="mode">Release</div>
                    </div>
                    <div class="env-card">
                        <h4>ğŸ”§ è·¯å¾„å‰ç¼€</h4>
                        <div class="env-value" id="prefix">assets/assets/</div>
                    </div>
                    <div class="env-card">
                        <h4>ğŸ“ å½“å‰URL</h4>
                        <div class="env-value" id="current-url">-</div>
                    </div>
                </div>
            </div>

            <div class="test-section">
                <h3>ğŸ–¼ï¸ å›¾ç‰‡è·¯å¾„æµ‹è¯•</h3>
                <div id="image-tests"></div>
            </div>

            <div class="test-section">
                <h3>ğŸ® 3Dæ¨¡å‹è·¯å¾„æµ‹è¯•</h3>
                <div id="model-tests"></div>
            </div>

            <div class="test-section">
                <h3>ğŸ¬ è§†é¢‘è·¯å¾„æµ‹è¯•</h3>
                <div id="video-tests"></div>
            </div>

            <div class="explanation">
                <h4>ğŸ’¡ è·¯å¾„ç®¡ç†å™¨å·¥ä½œåŸç†</h4>
                <p>
                    <strong>æœ¬åœ°å¼€å‘æ—¶ï¼š</strong> ä½¿ç”¨æ ‡å‡†è·¯å¾„ <code>assets/images/xxx.png</code><br>
                    <strong>Webå‘å¸ƒæ—¶ï¼š</strong> è‡ªåŠ¨æ·»åŠ å‰ç¼€ <code>assets/assets/images/xxx.png</code><br><br>
                    è¿™æ ·å¯ä»¥ä¿æŒä»£ç ç®€æ´ï¼ŒåŒæ—¶ç¡®ä¿åœ¨ä¸åŒç¯å¢ƒä¸‹éƒ½èƒ½æ­£ç¡®åŠ è½½èµ„æºã€‚
                </p>
            </div>

            <div style="text-align: center; margin-top: 30px;">
                <button class="button" onclick="runTests()">ğŸ”„ é‡æ–°è¿è¡Œæµ‹è¯•</button>
                <button class="button" onclick="checkActualFiles()">ğŸ“ æ£€æŸ¥å®é™…æ–‡ä»¶</button>
            </div>
        </div>
    </div>

    <script>
        // æ¨¡æ‹Ÿè·¯å¾„ç®¡ç†å™¨çš„é€»è¾‘
        class AssetPathManager {
            static getAssetPath(originalPath) {
                // åœ¨Webå‘å¸ƒæ¨¡å¼ä¸‹ï¼Œæ·»åŠ é¢å¤–çš„assetså‰ç¼€
                const isWebRelease = true; // åœ¨å®é™…Webç¯å¢ƒä¸­æ€»æ˜¯true
                
                if (isWebRelease) {
                    if (originalPath.startsWith('assets/')) {
                        return 'assets/' + originalPath;
                    } else {
                        return 'assets/assets/' + originalPath;
                    }
                }
                
                return originalPath;
            }

            static getImagePath(imagePath) {
                if (imagePath.startsWith('assets/')) {
                    return this.getAssetPath(imagePath);
                }
                return this.getAssetPath('assets/images/' + imagePath);
            }

            static getModelPath(modelPath) {
                if (modelPath.startsWith('assets/')) {
                    return this.getAssetPath(modelPath);
                }
                return this.getAssetPath('assets/models/' + modelPath);
            }

            static getVideoPath(videoPath) {
                if (videoPath.startsWith('assets/')) {
                    return this.getAssetPath(videoPath);
                }
                return this.getAssetPath('assets/videos/' + videoPath);
            }
        }

        // æµ‹è¯•æ•°æ®
        const testData = {
            images: [
                'avatar.png',
                'events/event1.png',
                'avatars/user_avatar.png',
                'assets/images/existing.png'
            ],
            models: [
                'bommieBoy.glb',
                'bommieGirl.glb',
                'bommie.glb',
                'assets/models/existing.glb'
            ],
            videos: [
                '1.mp4',
                '2.mp4',
                '4.mp4',
                'assets/videos/existing.mp4'
            ]
        };

        function createPathTest(input, output, type) {
            return `
                <div class="path-test">
                    <div class="path-input">è¾“å…¥: ${input}</div>
                    <div class="path-output">è¾“å‡º: ${output}</div>
                    <span class="status success">âœ… è½¬æ¢æˆåŠŸ</span>
                </div>
            `;
        }

        function runTests() {
            // å›¾ç‰‡æµ‹è¯•
            const imageContainer = document.getElementById('image-tests');
            imageContainer.innerHTML = '';
            testData.images.forEach(image => {
                const result = AssetPathManager.getImagePath(image);
                imageContainer.innerHTML += createPathTest(image, result, 'image');
            });

            // æ¨¡å‹æµ‹è¯•
            const modelContainer = document.getElementById('model-tests');
            modelContainer.innerHTML = '';
            testData.models.forEach(model => {
                const result = AssetPathManager.getModelPath(model);
                modelContainer.innerHTML += createPathTest(model, result, 'model');
            });

            // è§†é¢‘æµ‹è¯•
            const videoContainer = document.getElementById('video-tests');
            videoContainer.innerHTML = '';
            testData.videos.forEach(video => {
                const result = AssetPathManager.getVideoPath(video);
                videoContainer.innerHTML += createPathTest(video, result, 'video');
            });
        }

        function checkActualFiles() {
            // æ£€æŸ¥ä¸€äº›å…³é”®æ–‡ä»¶æ˜¯å¦å­˜åœ¨
            const filesToCheck = [
                'assets/assets/models/bommieBoy.glb',
                'assets/assets/images/events/event1.png',
                'assets/assets/videos/1.mp4'
            ];

            filesToCheck.forEach(file => {
                fetch(file)
                    .then(response => {
                        console.log(`${file}: ${response.ok ? 'âœ… å­˜åœ¨' : 'âŒ ä¸å­˜åœ¨'}`);
                    })
                    .catch(error => {
                        console.log(`${file}: âŒ æ£€æŸ¥å¤±è´¥`);
                    });
            });

            alert('æ–‡ä»¶æ£€æŸ¥ç»“æœå·²è¾“å‡ºåˆ°æ§åˆ¶å°ï¼Œè¯·æŒ‰F12æŸ¥çœ‹');
        }

        // åˆå§‹åŒ–
        window.addEventListener('load', () => {
            document.getElementById('current-url').textContent = window.location.href;
            runTests();
        });
    </script>
</body>
</html>
